//Geojson data//
var settlements = {
  "type" : "FeatureCollection",
  "name" : "settlements",
  "crs": {
      "type": "name",
      "properties": {
        "name": "urn:ogc:def:crs:OGC:1.3:CRS84"
      }
  },
  "features" : [
      {
          "type": "Feature",
          "properties": {
            "name": "Λάκα του Μαντζιάρα",
            "description": "Μαύρο νερό κάτω από το χώμα.",
            "counter": false,
            "category": "park"
          },
          "geometry": {
            "type": "Point",
            "coordinates": [
              21.911534070968628,
              39.36407381206143
            ]
          }
        },
      { 
          "type" : "Feature", 
          "properties" : {  
              "name" : "Χίλια Δέντρα",
              "description" : "Εδώ βγαίνει κακός ηλεκτρισμός, σπάνε κόκαλα για να τον παράγουν.",
              "counter": false,
              "category": "forest"
          }, 
          "geometry" : { 
              "type": "Polygon",
      "coordinates": [
        [
          [
            21.887426376342773,
            39.34335862490393
          ],
          [
            21.888091564178467,
            39.3425786781202
          ],
          [
            21.88854217529297,
            39.342595272823225
          ],
          [
            21.889615058898926,
            39.34106854365119
          ],
          [
            21.890151500701904,
            39.34105194858568
          ],
          [
            21.89150333404541,
            39.34214721445827
          ],
          [
            21.891117095947262,
            39.34354116438369
          ],
          [
            21.89077377319336,
            39.343839864322256
          ],
          [
            21.890687942504883,
            39.344204940291405
          ],
          [
            21.889207363128662,
            39.34412196864768
          ],
          [
            21.887426376342773,
            39.34335862490393
          ]
        ]
      ] 
          }
      },
    { 
          "type" : "Feature", 
          "properties" : {  
              "name" : "Αετοχώρι",
              "description" : "Μαρκελέσι",
              "counter": false,
              "category": "village"
          }, 
          "geometry" : { 
              "type" : "Point", 
              "coordinates" : [
                  21.465820, 39.285774 
              ] 
          }
      },
      { 
          "type" : "Feature", 
          "properties" : {  
              "name" : "Κάστρο Φαναρίου",
              "description" : "Στοιχειωμένο βυζαντινό κάστρο. Οι ταπετσαρίες του κροταλίζουν.",
              "counter": false,
              "category": "castle"
          }, 
          "geometry" : { 
              "type" : "Point", 
              "coordinates" : [
                  21.801922917366024,
                  39.415658771463484
              ] 
          }
      },
      { 
          "type" : "Feature", 
          "properties" : {  
              "name" : "Αγχίαλος",
              "description" : "Καλύβα χαζο-Λευτέρη. Τα τρανζίστορ παίζουν παράσιτα σε ακτίνα 200 μέτρων.",
              "counter": false,
              "category": "village"
          }, 
          "geometry" : { 
              "type" : "Point", 
              "coordinates" : [
                  22.821178436279297,
                  39.27796225036292
              ] 
          }
      },
      { 
          "type" : "Feature", 
          "properties" : {  
              "name" : "Καλύβια",
              "description" : "Η γιαγιά προμηθεύει με ζυμωτό ψωμί.",
              "counter": false,
              "category": "village"
          }, 
          "geometry" : { 
              "type" : "Point", 
              "coordinates" : [
                  21.711612939834595,
                  39.30660040078524
              ] 
          }
      }
  ]
};  
var regions = {
    "type": "FeatureCollection",
    "features": [
      {
        "type": "Feature",
        "properties": {
          "name":"Δρακοβούνια",
          "description":"Ραχοκοκαλιά Δράκου",
          "catigoria": "drakov"
        },
        "geometry": {
          "type": "Polygon",
          "coordinates": [
            [
              [
                23.18939208984375,
                39.155622393423215
              ],
              [
                23.170166015625,
                39.12792964388499
              ],
              [
                23.10699462890625,
                39.102357437817595
              ],
              [
                23.12347412109375,
                39.08956785484934
              ],
              [
                23.258056640625,
                39.12792964388499
              ],
              [
                23.33770751953125,
                39.172658670429946
              ],
              [
                23.329467773437496,
                39.23863526469436
              ],
              [
                23.28826904296875,
                39.29179704377487
              ],
              [
                23.24432373046875,
                39.35129035526705
              ],
              [
                23.1427001953125,
                39.44043541908485
              ],
              [
                23.0712890625,
                39.527348072681455
              ],
              [
                22.98614501953125,
                39.5633531658293
              ],
              [
                22.92572021484375,
                39.614152077002664
              ],
              [
                22.859802246093746,
                39.80853604144591
              ],
              [
                22.73345947265625,
                39.882342585755744
              ],
              [
                22.65380859375,
                39.970805680527725
              ],
              [
                22.4560546875,
                40.166281254206545
              ],
              [
                22.302246093749996,
                40.204050425113294
              ],
              [
                22.1978759765625,
                40.136890695345905
              ],
              [
                22.2528076171875,
                40.02340800226773
              ],
              [
                22.203369140625,
                39.930800820752765
              ],
              [
                22.2528076171875,
                39.85072092501597
              ],
              [
                22.357177734375,
                39.80009595634838
              ],
              [
                22.532958984375,
                39.78321267821705
              ],
              [
                22.6263427734375,
                39.69450749856091
              ],
              [
                22.69775390625,
                39.61838363831915
              ],
              [
                22.846069335937496,
                39.499802162332884
              ],
              [
                22.905120849609375,
                39.48496522541802
              ],
              [
                22.96142578125,
                39.436192999314095
              ],
              [
                23.006744384765625,
                39.40648882684979
              ],
              [
                23.00399780273437,
                39.377833529911555
              ],
              [
                23.054809570312496,
                39.335359608681216
              ],
              [
                23.1097412109375,
                39.308800296002914
              ],
              [
                23.17291259765625,
                39.2630946911543
              ],
              [
                23.193511962890625,
                39.23331686919235
              ],
              [
                23.226470947265625,
                39.18649760718107
              ],
              [
                23.2196044921875,
                39.1524276321479
              ],
              [
                23.18939208984375,
                39.155622393423215
              ]
            ]
          ]
        }
      },    {
        "type": "Feature",
        "properties": {
            "name":"Βλαχοχώρια",
            "description":"Τα Βλαχοχώρια απλώνονται πάνω στη θεσσαλική Πίνδο σαν σπαρμένα δόντια δράκοντα. Από την Κουτσού­ φλιανη στον Βορρά μέχρι το Καροπλέ­ σι στον Νότο, δεσπόζουν με τα πέτρινα σοκάκια τους να περιμένουν τον δια­ βάτη κάτω από τη σκιά των ελάτων. Ακόμη και μες στο καταχείμωνο, τότε που το χιόνι σκεπάζει τους φράχτες και οι περισσότεροι Βλάχοι έχουν κατέ­ βει στα χειμαδιά, βγαίνει καπνός από τις ψηλές καμινάδες κάποιων σπιτιών.",
            "catigoria": "vlachov"
      },
        "geometry": {
          "type": "Polygon",
          "coordinates": [
            [
              [
                21.7529296875,
                39.1642741434758
              ],
              [
                21.759796142578125,
                39.16307627231444
              ],
              [
                21.76717758178711,
                39.16028116027711
              ],
              [
                21.77043914794922,
                39.15575550532863
              ],
              [
                21.77764892578125,
                39.14830085082876
              ],
              [
                21.787090301513672,
                39.14870022733891
              ],
              [
                21.79515838623047,
                39.152161395494396
              ],
              [
                21.80150985717773,
                39.16134597795801
              ],
              [
                21.805973052978516,
                39.165871273292815
              ],
              [
                21.80837631225586,
                39.17438868649973
              ],
              [
                21.808204650878906,
                39.18130832513878
              ],
              [
                21.807861328125,
                39.19008996263508
              ],
              [
                21.811466217041016,
                39.19754018856473
              ],
              [
                21.818161010742188,
                39.20711788972778
              ],
              [
                21.820907592773434,
                39.22068406420172
              ],
              [
                21.829147338867188,
                39.223742741391305
              ],
              [
                21.841506958007812,
                39.224274671645446
              ],
              [
                21.86656951904297,
                39.23065752026364
              ],
              [
                21.86965942382812,
                39.235976117336556
              ],
              [
                21.880645751953125,
                39.23757161784572
              ],
              [
                21.880645751953125,
                39.24528269213582
              ],
              [
                21.877899169921875,
                39.25299291875617
              ],
              [
                21.877555847167965,
                39.26176559373815
              ],
              [
                21.864166259765625,
                39.26761343386089
              ],
              [
                21.845970153808594,
                39.27452388859232
              ],
              [
                21.83704376220703,
                39.280636415076756
              ],
              [
                21.830177307128906,
                39.28860847419942
              ],
              [
                21.81987762451172,
                39.299236474818194
              ],
              [
                21.8133544921875,
                39.307737713739556
              ],
              [
                21.812667846679688,
                39.31464421005064
              ],
              [
                21.813011169433594,
                39.32234680556202
              ],
              [
                21.816444396972656,
                39.329251859786815
              ],
              [
                21.82056427001953,
                39.33589069206677
              ],
              [
                21.82262420654297,
                39.3419978610317
              ],
              [
                21.8133544921875,
                39.34836999022121
              ],
              [
                21.800308227539062,
                39.354210598262206
              ],
              [
                21.79756164550781,
                39.36031616648231
              ],
              [
                21.787948608398438,
                39.35978526869001
              ],
              [
                21.779708862304688,
                39.35766163717121
              ],
              [
                21.76494598388672,
                39.361112505605156
              ],
              [
                21.75567626953125,
                39.36721747059305
              ],
              [
                21.742286682128906,
                39.372260300031286
              ],
              [
                21.72821044921875,
                39.37411809275825
              ],
              [
                21.717910766601562,
                39.379160423830974
              ],
              [
                21.703147888183594,
                39.38234486633152
              ],
              [
                21.694564819335938,
                39.38659056367115
              ],
              [
                21.68529510498047,
                39.39295862539141
              ],
              [
                21.685638427734375,
                39.40012200014591
              ],
              [
                21.67327880859375,
                39.40861097325807
              ],
              [
                21.665382385253906,
                39.41312031994407
              ],
              [
                21.66606903076172,
                39.420546843444335
              ],
              [
                21.665039062499996,
                39.43168514520587
              ],
              [
                21.654396057128906,
                39.44123084402689
              ],
              [
                21.63928985595703,
                39.446003202917645
              ],
              [
                21.62796020507812,
                39.45766759232811
              ],
              [
                21.61937713623047,
                39.46243882474595
              ],
              [
                21.60907745361328,
                39.47489550075251
              ],
              [
                21.606674194335938,
                39.48840979654311
              ],
              [
                21.609420776367188,
                39.497682793774196
              ],
              [
                21.60358428955078,
                39.50854387455544
              ],
              [
                21.607704162597656,
                39.51754933701489
              ],
              [
                21.62555694580078,
                39.52072745681898
              ],
              [
                21.625900268554688,
                39.53132013922996
              ],
              [
                21.609420776367188,
                39.53661587448484
              ],
              [
                21.59912109375,
                39.539131207210346
              ],
              [
                21.591224670410156,
                39.54323497544602
              ],
              [
                21.588821411132812,
                39.54879453241936
              ],
              [
                21.575603485107422,
                39.55395657933776
              ],
              [
                21.565475463867188,
                39.55977996603926
              ],
              [
                21.564788818359375,
                39.5681171458385
              ],
              [
                21.557922363281246,
                39.58108409984565
              ],
              [
                21.557235717773438,
                39.593254951279626
              ],
              [
                21.559638977050778,
                39.60515915029787
              ],
              [
                21.55689239501953,
                39.617325772242175
              ],
              [
                21.55620574951172,
                39.624466054492345
              ],
              [
                21.553115844726562,
                39.634249689215295
              ],
              [
                21.551055908203125,
                39.64059509088576
              ],
              [
                21.55414581298828,
                39.64958341339568
              ],
              [
                21.558265686035156,
                39.658041943725856
              ],
              [
                21.56513214111328,
                39.66332799957865
              ],
              [
                21.57062530517578,
                39.67469165049055
              ],
              [
                21.569252014160156,
                39.68129756502578
              ],
              [
                21.57062530517578,
                39.687110247162934
              ],
              [
                21.576461791992188,
                39.69133734501796
              ],
              [
                21.575775146484375,
                39.70031906859748
              ],
              [
                21.58435821533203,
                39.70903550610645
              ],
              [
                21.58641815185547,
                39.71827900932003
              ],
              [
                21.55586242675781,
                39.733066037939444
              ],
              [
                21.545562744140625,
                39.73834635103298
              ],
              [
                21.540069580078125,
                39.74943369178247
              ],
              [
                21.52084350585937,
                39.765797457856515
              ],
              [
                21.510543823242188,
                39.77951890877299
              ],
              [
                21.49543762207031,
                39.78901677245968
              ],
              [
                21.478271484375,
                39.78426800449771
              ],
              [
                21.4727783203125,
                39.79956841663087
              ],
              [
                21.474838256835938,
                39.813810568514526
              ],
              [
                21.479644775390625,
                39.826467782187414
              ],
              [
                21.478614807128906,
                39.84254962718802
              ],
              [
                21.47998809814453,
                39.85941833463054
              ],
              [
                21.484451293945312,
                39.876546372401194
              ],
              [
                21.48273468017578,
                39.88919202444146
              ],
              [
                21.47998809814453,
                39.89498716884207
              ],
              [
                21.47449493408203,
                39.899728286187894
              ],
              [
                21.46007537841797,
                39.89946489938474
              ],
              [
                21.44702911376953,
                39.89630417878359
              ],
              [
                21.442909240722653,
                39.8928799002948
              ],
              [
                21.440677642822266,
                39.89248478022941
              ],
              [
                21.437072753906246,
                39.89419695072923
              ],
              [
                21.433124542236325,
                39.895250572855026
              ],
              [
                21.431064605712887,
                39.89604077881996
              ],
              [
                21.427974700927734,
                39.89419695072923
              ],
              [
                21.42660140991211,
                39.892616487170955
              ],
              [
                21.426258087158203,
                39.88919202444146
              ],
              [
                21.42522811889648,
                39.88734801211131
              ],
              [
                21.421451568603512,
                39.884977066231485
              ],
              [
                21.41836166381836,
                39.883001215364565
              ],
              [
                21.41338348388672,
                39.87918107556866
              ],
              [
                21.410465240478516,
                39.87588768079352
              ],
              [
                21.4097785949707,
                39.87351633862447
              ],
              [
                21.412181854248047,
                39.871968334925064
              ],
              [
                21.413898468017578,
                39.87190246165225
              ],
              [
                21.418190002441406,
                39.87242944606333
              ],
              [
                21.420679092407227,
                39.87292349027166
              ],
              [
                21.423339843749996,
                39.873121106958635
              ],
              [
                21.423983573913574,
                39.872495318830055
              ],
              [
                21.424026489257812,
                39.8710461033491
              ],
              [
                21.423211097717285,
                39.86897103696903
              ],
              [
                21.416773796081543,
                39.859945414941905
              ],
              [
                21.415743827819824,
                39.85737586018571
              ],
              [
                21.41707420349121,
                39.85434497962974
              ],
              [
                21.41810417175293,
                39.85319189209858
              ],
              [
                21.420893669128418,
                39.8511492323497
              ],
              [
                21.41458511352539,
                39.848151024892886
              ],
              [
                21.4097785949707,
                39.84604231704053
              ],
              [
                21.403427124023438,
                39.84254962718802
              ],
              [
                21.400938034057617,
                39.84169290254289
              ],
              [
                21.39716148376465,
                39.841956511264485
              ],
              [
                21.394157409667965,
                39.84261552864106
              ],
              [
                21.391239166259766,
                39.84334044044997
              ],
              [
                21.390209197998043,
                39.84307683704132
              ],
              [
                21.389436721801758,
                39.84192356022963
              ],
              [
                21.38960838317871,
                39.84040779553318
              ],
              [
                21.389436721801758,
                39.838727234693174
              ],
              [
                21.38763427734375,
                39.83520121848853
              ],
              [
                21.386561393737793,
                39.83388303510325
              ],
              [
                21.38540267944336,
                39.832960291681005
              ],
              [
                21.38364315032959,
                39.832268225979355
              ],
              [
                21.38038158416748,
                39.8326636929484
              ],
              [
                21.379222869873047,
                39.832894380962216
              ],
              [
                21.376304626464844,
                39.83220231459649
              ],
              [
                21.37441635131836,
                39.83187275673349
              ],
              [
                21.372785568237305,
                39.83220231459649
              ],
              [
                21.371755599975586,
                39.83378417032951
              ],
              [
                21.372270584106445,
                39.83628870073632
              ],
              [
                21.37141227722168,
                39.83714549280397
              ],
              [
                21.369266510009766,
                39.83839770813718
              ],
              [
                21.36815071105957,
                39.83932037850936
              ],
              [
                21.3643741607666,
                39.839056759668004
              ],
              [
                21.35965347290039,
                39.83866132950848
              ],
              [
                21.355361938476562,
                39.8367500516394
              ],
              [
                21.35244369506836,
                39.83457508453491
              ],
              [
                21.348752975463867,
                39.83325688913288
              ],
              [
                21.34394645690918,
                39.83088407365773
              ],
              [
                21.339826583862305,
                39.83042268335254
              ],
              [
                21.335792541503906,
                39.83134546086394
              ],
              [
                21.32944107055664,
                39.83833180263623
              ],
              [
                21.32497787475586,
                39.843472241774805
              ],
              [
                21.322574615478516,
                39.84940303953485
              ],
              [
                21.323089599609375,
                39.85309305512312
              ],
              [
                21.321372985839844,
                39.85651932055326
              ],
              [
                21.32223129272461,
                39.86047249120486
              ],
              [
                21.320514678955078,
                39.86416191168911
              ],
              [
                21.32223129272461,
                39.86692884686742
              ],
              [
                21.319141387939453,
                39.86930041677591
              ],
              [
                21.315364837646484,
                39.86850990258249
              ],
              [
                21.31175994873047,
                39.86534775471508
              ],
              [
                21.308670043945312,
                39.861263098008536
              ],
              [
                21.304893493652344,
                39.85955010508791
              ],
              [
                21.29922866821289,
                39.85810061614039
              ],
              [
                21.295795440673828,
                39.857441747406966
              ],
              [
                21.292877197265625,
                39.85348840217105
              ],
              [
                21.290817260742184,
                39.85217056982245
              ],
              [
                21.286697387695312,
                39.85467442965202
              ],
              [
                21.281032562255856,
                39.85480620921817
              ],
              [
                21.27901554107666,
                39.85523449106069
              ],
              [
                21.27699851989746,
                39.85595926962905
              ],
              [
                21.27425193786621,
                39.85595926962905
              ],
              [
                21.270732879638672,
                39.85500387809296
              ],
              [
                21.26300811767578,
                39.85203878519601
              ],
              [
                21.26232147216797,
                39.84979840783579
              ],
              [
                21.26180648803711,
                39.847426163874154
              ],
              [
                21.262149810791016,
                39.846108215141285
              ],
              [
                21.262922286987305,
                39.84551512995728
              ],
              [
                21.264209747314453,
                39.84472434174232
              ],
              [
                21.26455307006836,
                39.84334044044997
              ],
              [
                21.26506805419922,
                39.83760683795155
              ],
              [
                21.26455307006836,
                39.83582734673415
              ],
              [
                21.261205673217773,
                39.829631721333726
              ],
              [
                21.260948181152344,
                39.82778610787324
              ],
              [
                21.257343292236328,
                39.82205120681962
              ],
              [
                21.256141662597656,
                39.82152383556439
              ],
              [
                21.25408172607422,
                39.820963499170944
              ],
              [
                21.252107620239258,
                39.8204690809117
              ],
              [
                21.250948905944824,
                39.81961208083553
              ],
              [
                21.249876022338864,
                39.8181947111016
              ],
              [
                21.247215270996094,
                39.81265680030098
              ],
              [
                21.247386932373047,
                39.81179970280552
              ],
              [
                21.24807357788086,
                39.811008526401096
              ],
              [
                21.249103546142578,
                39.810645900839134
              ],
              [
                21.25034809112549,
                39.80998657673472
              ],
              [
                21.250863075256344,
                39.8092942796193
              ],
              [
                21.251506805419922,
                39.80804153378382
              ],
              [
                21.250991821289062,
                39.80718437874338
              ],
              [
                21.24927520751953,
                39.8057008159189
              ],
              [
                21.246442794799805,
                39.80576675272421
              ],
              [
                21.24378204345703,
                39.8057008159189
              ],
              [
                21.24197959899902,
                39.804711756251194
              ],
              [
                21.23906135559082,
                39.80378862105812
              ],
              [
                21.237258911132812,
                39.804579880553824
              ],
              [
                21.23579978942871,
                39.805832689466264
              ],
              [
                21.23356819152832,
                39.807085475551034
              ],
              [
                21.230392456054684,
                39.80833823880791
              ],
              [
                21.228246688842773,
                39.80800856647987
              ],
              [
                21.22653007507324,
                39.80444800460356
              ],
              [
                21.227989196777344,
                39.79679876672049
              ],
              [
                21.22859001159668,
                39.7921824356723
              ],
              [
                21.228675842285156,
                39.786642429449685
              ],
              [
                21.226444244384762,
                39.78545522721637
              ],
              [
                21.224899291992188,
                39.782816926688916
              ],
              [
                21.225757598876953,
                39.78070621343139
              ],
              [
                21.22687339782715,
                39.77786984054237
              ],
              [
                21.22661590576172,
                39.77424175134454
              ],
              [
                21.227474212646484,
                39.770283617740986
              ],
              [
                21.227474212646484,
                39.766853051187304
              ],
              [
                21.229190826416016,
                39.7631584037253
              ],
              [
                21.230907440185547,
                39.76131100565051
              ],
              [
                21.23279571533203,
                39.75735212859945
              ],
              [
                21.233654022216797,
                39.755240634452875
              ],
              [
                21.232967376708984,
                39.753129075575174
              ],
              [
                21.230907440185547,
                39.750621515334444
              ],
              [
                21.2310791015625,
                39.74824584774991
              ],
              [
                21.2310791015625,
                39.74626606218367
              ],
              [
                21.229534149169922,
                39.74415422820842
              ],
              [
                21.227645874023438,
                39.74217432507174
              ],
              [
                21.227130889892578,
                39.74072235994946
              ],
              [
                21.22730255126953,
                39.73821434813576
              ],
              [
                21.225414276123047,
                39.73346207545313
              ],
              [
                21.228160858154297,
                39.732405970360254
              ],
              [
                21.231422424316406,
                39.73346207545313
              ],
              [
                21.234169006347653,
                39.733594087452055
              ],
              [
                21.237773895263672,
                39.73227395608596
              ],
              [
                21.242923736572266,
                39.72884149621558
              ],
              [
                21.245498657226562,
                39.725936973609194
              ],
              [
                21.24704360961914,
                39.72488075323342
              ],
              [
                21.24755859375,
                39.72184402952798
              ],
              [
                21.24652862548828,
                39.71590222679897
              ],
              [
                21.247901916503903,
                39.7100919691646
              ],
              [
                21.255455017089844,
                39.70797902687034
              ],
              [
                21.253395080566406,
                39.70428122214432
              ],
              [
                21.251678466796875,
                39.6995266105892
              ],
              [
                21.247901916503903,
                39.6953000141987
              ],
              [
                21.23622894287109,
                39.696356687561334
              ],
              [
                21.22936248779297,
                39.70137566512028
              ],
              [
                21.22661590576172,
                39.70718665682654
              ],
              [
                21.21631622314453,
                39.70903550610645
              ],
              [
                21.210823059082028,
                39.70956373965779
              ],
              [
                21.203956604003906,
                39.71590222679897
              ],
              [
                21.19434356689453,
                39.71801492641796
              ],
              [
                21.192283630371094,
                39.71352536237346
              ],
              [
                21.18438720703125,
                39.71167663341798
              ],
              [
                21.17717742919922,
                39.71616631779044
              ],
              [
                21.168251037597656,
                39.71748675758025
              ],
              [
                21.16069793701172,
                39.712997159156195
              ],
              [
                21.158981323242188,
                39.7016398117233
              ],
              [
                21.153831481933594,
                39.698469985756695
              ],
              [
                21.14593505859375,
                39.698205827020935
              ],
              [
                21.142845153808594,
                39.692922439987704
              ],
              [
                21.142845153808594,
                39.688695439188244
              ],
              [
                21.137008666992188,
                39.68578922600667
              ],
              [
                21.131515502929688,
                39.684468179576236
              ],
              [
                21.124649047851562,
                39.68393975392731
              ],
              [
                21.120529174804688,
                39.6773340921232
              ],
              [
                21.123619079589844,
                39.66940646395885
              ],
              [
                21.12945556640625,
                39.66412087308367
              ],
              [
                21.134605407714844,
                39.660420718894215
              ],
              [
                21.13941192626953,
                39.65698468403725
              ],
              [
                21.143875122070312,
                39.65249114993853
              ],
              [
                21.151084899902344,
                39.65090512698529
              ],
              [
                21.15589141845703,
                39.647204265258736
              ],
              [
                21.154518127441406,
                39.63821563347804
              ],
              [
                21.151084899902344,
                39.632663247840526
              ],
              [
                21.148338317871094,
                39.63001909803368
              ],
              [
                21.152458190917965,
                39.62552381143114
              ],
              [
                21.150741577148438,
                39.62129268666272
              ],
              [
                21.15520477294922,
                39.61759024027718
              ],
              [
                21.16138458251953,
                39.61706130319664
              ],
              [
                21.170310974121094,
                39.61600341690947
              ],
              [
                21.176834106445312,
                39.61520999158382
              ],
              [
                21.17992401123047,
                39.61706130319664
              ],
              [
                21.18335723876953,
                39.614152077002664
              ],
              [
                21.185073852539062,
                39.60912676195208
              ],
              [
                21.184043884277344,
                39.60515915029787
              ],
              [
                21.18610382080078,
                39.60092678061372
              ],
              [
                21.187820434570312,
                39.596165055536716
              ],
              [
                21.19091033935547,
                39.590873865955906
              ],
              [
                21.192283630371094,
                39.58584686152544
              ],
              [
                21.192283630371094,
                39.579231826349016
              ],
              [
                21.195716857910156,
                39.57579175852258
              ],
              [
                21.19709014892578,
                39.56679385088855
              ],
              [
                21.195373535156246,
                39.56150041854836
              ],
              [
                21.195373535156246,
                39.55435364396128
              ],
              [
                21.1981201171875,
                39.54800033726552
              ],
              [
                21.200180053710938,
                39.538469286383034
              ],
              [
                21.20258331298828,
                39.53264411091661
              ],
              [
                21.20086669921875,
                39.52708326016558
              ],
              [
                21.20361328125,
                39.52205163048525
              ],
              [
                21.196060180664062,
                39.519138415094176
              ],
              [
                21.190223693847656,
                39.51569536664156
              ],
              [
                21.184730529785156,
                39.50748433163955
              ],
              [
                21.181297302246094,
                39.500861822379136
              ],
              [
                21.182327270507812,
                39.49794771837798
              ],
              [
                21.190223693847656,
                39.4982126419721
              ],
              [
                21.192970275878906,
                39.49635815560969
              ],
              [
                21.197433471679688,
                39.49609322494774
              ],
              [
                21.20498657226562,
                39.4982126419721
              ],
              [
                21.214942932128906,
                39.499272326251436
              ],
              [
                21.213226318359375,
                39.49026449493615
              ],
              [
                21.216659545898434,
                39.48152048366842
              ],
              [
                21.201553344726562,
                39.475955540420635
              ],
              [
                21.195373535156246,
                39.47436547486121
              ],
              [
                21.19983673095703,
                39.46349905420083
              ],
              [
                21.209449768066406,
                39.458197745414424
              ],
              [
                21.215972900390625,
                39.44944970317876
              ],
              [
                21.223526000976562,
                39.44176112227503
              ],
              [
                21.23554229736328,
                39.43407169253772
              ],
              [
                21.242752075195312,
                39.43274584300144
              ],
              [
                21.247901916503903,
                39.42797257575727
              ],
              [
                21.254425048828125,
                39.42213813840354
              ],
              [
                21.261634826660153,
                39.4210772791341
              ],
              [
                21.266441345214844,
                39.41683368059009
              ],
              [
                21.268844604492188,
                39.41152881911995
              ],
              [
                21.27227783203125,
                39.408345708488824
              ],
              [
                21.27227783203125,
                39.404366615861036
              ],
              [
                21.273651123046875,
                39.39853020265668
              ],
              [
                21.275367736816406,
                39.396142438314484
              ],
              [
                21.27777099609375,
                39.395081183483946
              ],
              [
                21.27605438232422,
                39.39295862539141
              ],
              [
                21.275367736816406,
                39.38871331548407
              ],
              [
                21.273307800292965,
                39.386059865628575
              ],
              [
                21.271591186523438,
                39.38022192080671
              ],
              [
                21.276397705078125,
                39.3773027652817
              ],
              [
                21.281890869140625,
                39.37252570201878
              ],
              [
                21.28704071044922,
                39.36960622467088
              ],
              [
                21.29425048828125,
                39.36854456627989
              ],
              [
                21.29425048828125,
                39.36482863480281
              ],
              [
                21.299400329589844,
                39.3632360322142
              ],
              [
                21.306610107421875,
                39.361112505605156
              ],
              [
                21.306095123291016,
                39.3572634490742
              ],
              [
                21.31072998046875,
                39.358856187844324
              ],
              [
                21.313133239746094,
                39.35620160305295
              ],
              [
                21.316051483154293,
                39.35713071920419
              ],
              [
                21.319313049316406,
                39.35792709464162
              ],
              [
                21.316223144531246,
                39.360050718090534
              ],
              [
                21.31673812866211,
                39.36137794996196
              ],
              [
                21.31948471069336,
                39.35965254361147
              ],
              [
                21.322917938232422,
                39.35845800655627
              ],
              [
                21.324462890625,
                39.35686525870761
              ],
              [
                21.338539123535156,
                39.35792709464162
              ],
              [
                21.345748901367188,
                39.35925436686273
              ],
              [
                21.3519287109375,
                39.356068871165476
              ],
              [
                21.36394500732422,
                39.35792709464162
              ],
              [
                21.369781494140625,
                39.35766163717121
              ],
              [
                21.37767791748047,
                39.35792709464162
              ],
              [
                21.38385772705078,
                39.35394512666976
              ],
              [
                21.389694213867188,
                39.35447606884594
              ],
              [
                21.390724182128906,
                39.349431955268365
              ],
              [
                21.394157409667965,
                39.3465115125552
              ],
              [
                21.397247314453125,
                39.34624601171117
              ],
              [
                21.396560668945312,
                39.34093578301682
              ],
              [
                21.39690399169922,
                39.33748391801758
              ],
              [
                21.39965057373047,
                39.335359608681216
              ],
              [
                21.402740478515625,
                39.33217302364838
              ],
              [
                21.401023864746094,
                39.32951742518054
              ],
              [
                21.406517028808594,
                39.32845515755447
              ],
              [
                21.41063690185547,
                39.325268257858575
              ],
              [
                21.412010192871094,
                39.32022203633818
              ],
              [
                21.416473388671875,
                39.31610511230123
              ],
              [
                21.414241790771484,
                39.31371452909937
              ],
              [
                21.413726806640625,
                39.31052695776979
              ],
              [
                21.412181854248047,
                39.30787053740479
              ],
              [
                21.412181854248047,
                39.30375288655931
              ],
              [
                21.414928436279297,
                39.29897079446437
              ],
              [
                21.42127990722656,
                39.29777522039433
              ],
              [
                21.428489685058594,
                39.297376691166924
              ],
              [
                21.430377960205078,
                39.29392267616436
              ],
              [
                21.429176330566403,
                39.28953848865666
              ],
              [
                21.428489685058594,
                39.28342673898507
              ],
              [
                21.426258087158203,
                39.27890901600268
              ],
              [
                21.420249938964844,
                39.27611851213474
              ],
              [
                21.417675018310547,
                39.271467425358935
              ],
              [
                21.414413452148438,
                39.26721473298804
              ],
              [
                21.41183853149414,
                39.26229723572877
              ],
              [
                21.401195526123047,
                39.25511972864392
              ],
              [
                21.3958740234375,
                39.249669649158754
              ],
              [
                21.391582489013672,
                39.246080341096295
              ],
              [
                21.384544372558594,
                39.245814459117405
              ],
              [
                21.380939483642578,
                39.24568151775
              ],
              [
                21.380424499511715,
                39.240363656429324
              ],
              [
                21.377506256103516,
                39.237704574583695
              ],
              [
                21.37012481689453,
                39.23650795487107
              ],
              [
                21.364459991455078,
                39.229327808005706
              ],
              [
                21.35913848876953,
                39.2236097581979
              ],
              [
                21.35690689086914,
                39.21975313599469
              ],
              [
                21.35364532470703,
                39.21922117147663
              ],
              [
                21.367034912109375,
                39.212571274892355
              ],
              [
                21.38317108154297,
                39.21230526592873
              ],
              [
                21.394500732421875,
                39.21469931032406
              ],
              [
                21.42780303955078,
                39.217625253736664
              ],
              [
                21.449432373046875,
                39.222678868789686
              ],
              [
                21.454925537109375,
                39.22799807055236
              ],
              [
                21.465911865234375,
                39.23836935449403
              ],
              [
                21.478271484375,
                39.24794148672621
              ],
              [
                21.499214172363278,
                39.25432218249597
              ],
              [
                21.51947021484375,
                39.245814459117405
              ],
              [
                21.537322998046875,
                39.23384872688399
              ],
              [
                21.551055908203125,
                39.21789124254598
              ],
              [
                21.58126831054687,
                39.22108302965423
              ],
              [
                21.612167358398438,
                39.230923459691766
              ],
              [
                21.629676818847656,
                39.23783753106971
              ],
              [
                21.67774200439453,
                39.235710197057486
              ],
              [
                21.697654724121094,
                39.228264020058646
              ],
              [
                21.725120544433594,
                39.223742741391305
              ],
              [
                21.726837158203125,
                39.19847141126355
              ],
              [
                21.73748016357422,
                39.18037687499038
              ],
              [
                21.7474365234375,
                39.16627055008069
              ],
              [
                21.7529296875,
                39.1642741434758
              ]
            ]
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {
           "name":"Καραγκουνοχώρια",
           "description":"Μακριά από τη δυσοίωνη σκιά των Αγράφων, κεντημένα στο λινομάνικο του θεσσαλικού κάμπου, τα Καραγκου­ νοχώρια βαριανασαίνουν μέσα στην κάψα του καλοκαιριού. Πλάι σε λιβα­ κωμένους αγρούς και μοναχικά δέντρα, πλάι στα ανήσυχα όνειρα του αργοκί­ νητου Πηνειού, απλώνονται σε άτακτες σειρές τα σπίτια των Καραγκούνηδων από ασβεστωμένα πλιθιά. Στα σκονι­ σμένα σοκάκια, οι κοπέλες ακουμπά­ νε χάμω τις γεμάτες στάμνες, στρέ­ φονται προς τα Μετέωρα και ζητάνε από το νερό να τους πει τη μοίρα τους.",
           "catigoria": "karagunov"
      },
        "geometry": {
          "type": "Polygon",
          "coordinates": [
            [
              [
                21.61980628967286,
                39.669340396568465
              ],
              [
                21.625642776489265,
                39.65876880038044
              ],
              [
                21.63147926330567,
                39.64581639103854
              ],
              [
                21.63388252258302,
                39.63180391023835
              ],
              [
                21.637315750122077,
                39.618317522162975
              ],
              [
                21.622209548950206,
                39.599537977949325
              ],
              [
                21.622896194458022,
                39.589484861724216
              ],
              [
                21.622896194458022,
                39.58022412187847
              ],
              [
                21.617059707641616,
                39.56646302320509
              ],
              [
                21.614999771118182,
                39.56143424808719
              ],
              [
                21.613969802856452,
                39.549522536658046
              ],
              [
                21.624612808227546,
                39.54343353872209
              ],
              [
                21.63353919982911,
                39.538667863293995
              ],
              [
                21.63525581359864,
                39.530194743444824
              ],
              [
                21.634569168090835,
                39.524368873651305
              ],
              [
                21.624269485473643,
                39.511656188434856
              ],
              [
                21.61980628967286,
                39.502649962073136
              ],
              [
                21.61774635314942,
                39.49125806301032
              ],
              [
                21.624269485473643,
                39.481454236962605
              ],
              [
                21.629419326782234,
                39.46740851072471
              ],
              [
                21.64349555969239,
                39.46528815478122
              ],
              [
                21.660318374633803,
                39.462637618999025
              ],
              [
                21.670618057250984,
                39.461312313253124
              ],
              [
                21.689500808715835,
                39.455745753543106
              ],
              [
                21.6929340362549,
                39.44832298147652
              ],
              [
                21.688127517700202,
                39.443815912353294
              ],
              [
                21.6877841949463,
                39.43241437667497
              ],
              [
                21.704950332641612,
                39.431088495599596
              ],
              [
                21.724863052368175,
                39.42896703339857
              ],
              [
                21.737909317016616,
                39.428171468420906
              ],
              [
                21.764001846313484,
                39.42843665775602
              ],
              [
                21.77739143371583,
                39.433209893209195
              ],
              [
                21.798334121704116,
                39.44063427617197
              ],
              [
                21.810350418090835,
                39.43294472204039
              ],
              [
                21.818933486938484,
                39.4239283018064
              ],
              [
                21.82168006896974,
                39.4157064313019
              ],
              [
                21.822023391723647,
                39.40642250873391
              ],
              [
                21.821336746215827,
                39.395810797914166
              ],
              [
                21.819620132446307,
                39.38227852526124
              ],
              [
                21.818246841430675,
                39.37431713904707
              ],
              [
                21.819620132446307,
                39.36210791674174
              ],
              [
                21.82682991027833,
                39.35679889342583
              ],
              [
                21.834383010864265,
                39.35148946662114
              ],
              [
                21.84056282043458,
                39.34564863112422
              ],
              [
                21.839532852172866,
                39.33688646254097
              ],
              [
                21.832666397094737,
                39.33051328642479
              ],
              [
                21.830606460571296,
                39.31989003531672
              ],
              [
                21.83541297912599,
                39.307936949142864
              ],
              [
                21.843652725219737,
                39.300498442728994
              ],
              [
                21.85532569885255,
                39.29146490788499
              ],
              [
                21.85772895812989,
                39.28402465107548
              ],
              [
                21.879701614379893,
                39.27366011901984
              ],
              [
                21.897554397583026,
                39.26940755971955
              ],
              [
                21.897554397583026,
                39.27977272086418
              ],
              [
                21.918840408325202,
                39.28455612420437
              ],
              [
                21.931200027465835,
                39.27950696665635
              ],
              [
                21.940813064575206,
                39.27339434162451
              ],
              [
                21.948709487915053,
                39.26674957910298
              ],
              [
                21.960382461547866,
                39.255850804643394
              ],
              [
                21.96518898010255,
                39.248938508711504
              ],
              [
                21.96312904357911,
                39.23590963736126
              ],
              [
                21.987161636352557,
                39.220750558601246
              ],
              [
                21.99746131896974,
                39.22314431503688
              ],
              [
                22.011194229125987,
                39.22474010731107
              ],
              [
                22.018060684204112,
                39.21330279434636
              ],
              [
                22.0393466949463,
                39.21516480947775
              ],
              [
                22.05170631408693,
                39.21090870233734
              ],
              [
                22.062349319458015,
                39.209046574344356
              ],
              [
                22.077798843383796,
                39.20159756862072
              ],
              [
                22.08569526672364,
                39.191486940166804
              ],
              [
                22.09839820861818,
                39.186164972388035
              ],
              [
                22.111444473266612,
                39.189358201416546
              ],
              [
                22.13238716125489,
                39.18430218845547
              ],
              [
                22.14989662170411,
                39.18350383737192
              ],
              [
                22.17358589172364,
                39.192551285360906
              ],
              [
                22.190065383911147,
                39.20718439697558
              ],
              [
                22.208604812622077,
                39.22793158301833
              ],
              [
                22.21787452697755,
                39.24441856219186
              ],
              [
                22.244997024536147,
                39.25531911376339
              ],
              [
                22.270402908325206,
                39.25877503241023
              ],
              [
                22.28379249572755,
                39.25425571990744
              ],
              [
                22.28516578674317,
                39.249204378847
              ],
              [
                22.286195755004893,
                39.239100605119695
              ],
              [
                22.29443550109864,
                39.21410080687747
              ],
              [
                22.342500686645522,
                39.19175302797668
              ],
              [
                22.385072708129897,
                39.186431080348406
              ],
              [
                22.41665840148927,
                39.17791512590379
              ],
              [
                22.449617385864272,
                39.16300972331846
              ],
              [
                22.474336624145515,
                39.159815297473656
              ],
              [
                22.49768257141114,
                39.19068867069194
              ],
              [
                22.53750801086427,
                39.21090870233734
              ],
              [
                22.592439651489265,
                39.200267305897626
              ],
              [
                22.607545852661147,
                39.17897967662763
              ],
              [
                22.622652053833026,
                39.180044211232165
              ],
              [
                22.655611038208015,
                39.170462819508536
              ],
              [
                22.687196731567397,
                39.16194493082076
              ],
              [
                22.751741409301772,
                39.15023114963322
              ],
              [
                22.79294013977052,
                39.149166163736396
              ],
              [
                22.82727241516115,
                39.14384099251814
              ],
              [
                22.850618362426776,
                39.13638507597927
              ],
              [
                22.85611152648927,
                39.14597110935183
              ],
              [
                22.846755981445312,
                39.15668728161543
              ],
              [
                22.84778594970703,
                39.16627055008069
              ],
              [
                22.839889526367188,
                39.174255609851656
              ],
              [
                22.831993103027344,
                39.18623149947259
              ],
              [
                22.823839187622085,
                39.20239571416313
              ],
              [
                22.820405960083015,
                39.21942065864326
              ],
              [
                22.816543579101573,
                39.231721271929146
              ],
              [
                22.812080383300792,
                39.25166362981673
              ],
              [
                22.819633483886733,
                39.277713099383746
              ],
              [
                22.799119949340827,
                39.29279344199212
              ],
              [
                22.79637336730958,
                39.31457780467807
              ],
              [
                22.794313430786147,
                39.34219699886287
              ],
              [
                22.799119949340827,
                39.359718906182266
              ],
              [
                22.803926467895526,
                39.38466676406566
              ],
              [
                22.791566848754893,
                39.395280169994344
              ],
              [
                22.778520584106463,
                39.406953051895
              ],
              [
                22.790193557739276,
                39.42604991740824
              ],
              [
                22.81971931457521,
                39.44514155119922
              ],
              [
                22.841005325317397,
                39.45998698227094
              ],
              [
                22.86641120910646,
                39.47164902878834
              ],
              [
                22.874650955200206,
                39.492317853306425
              ],
              [
                22.849245071411147,
                39.50980206078373
              ],
              [
                22.818346023559577,
                39.515099437084466
              ],
              [
                22.77920722961427,
                39.54581625372028
              ],
              [
                22.76959419250489,
                39.55058143827851
              ],
              [
                22.746248245239265,
                39.558257991705894
              ],
              [
                22.73320198059083,
                39.56963890381006
              ],
              [
                22.724962234497077,
                39.58101794807315
              ],
              [
                22.715005874633796,
                39.594776157391415
              ],
              [
                22.695436477661143,
                39.6027123431181
              ],
              [
                22.68616676330567,
                39.61752412336314
              ],
              [
                22.67758369445802,
                39.63153949652095
              ],
              [
                22.67483711242677,
                39.64423021496144
              ],
              [
                22.664194107055675,
                39.65850448975414
              ],
              [
                22.651834487915057,
                39.668547582955554
              ],
              [
                22.638788223266612,
                39.67964614562554
              ],
              [
                22.61235237121583,
                39.696818977070684
              ],
              [
                22.59690284729005,
                39.69787562717945
              ],
              [
                22.571496963500987,
                39.69206385139702
              ],
              [
                22.558450698852553,
                39.684666338152
              ],
              [
                22.536821365356463,
                39.68572317428542
              ],
              [
                22.51999855041505,
                39.6944414551804
              ],
              [
                22.504205703735366,
                39.70474345857281
              ],
              [
                22.50008583068849,
                39.71557211163769
              ],
              [
                22.494592666625987,
                39.737488327681596
              ],
              [
                22.485322952270515,
                39.74303229008218
              ],
              [
                22.440347671508796,
                39.7543828214657
              ],
              [
                22.43966102600099,
                39.765995382838824
              ],
              [
                22.435197830200202,
                39.78604883089367
              ],
              [
                22.41974830627442,
                39.79660093031592
              ],
              [
                22.400178909301765,
                39.80187637301775
              ],
              [
                22.392969131469737,
                39.80820637006639
              ],
              [
                22.39502906799318,
                39.815854338953706
              ],
              [
                22.393655776977546,
                39.825874527375596
              ],
              [
                22.38953590393067,
                39.8308840736577
              ],
              [
                22.36996650695802,
                39.82455616500892
              ],
              [
                22.34387397766115,
                39.820337235441755
              ],
              [
                22.32121467590333,
                39.823501456901866
              ],
              [
                22.306795120239265,
                39.832729603888524
              ],
              [
                22.295122146606463,
                39.834311447478385
              ],
              [
                22.272462844848643,
                39.84090207030618
              ],
              [
                22.272119522094737,
                39.832729603888524
              ],
              [
                22.277612686157244,
                39.81796397372697
              ],
              [
                22.284135818481456,
                39.806096435802225
              ],
              [
                22.286882400512706,
                39.79686471206221
              ],
              [
                22.29443550109864,
                39.77259255666891
              ],
              [
                22.281389236450202,
                39.766787077078284
              ],
              [
                22.273836135864272,
                39.755702529328744
              ],
              [
                22.26971626281739,
                39.72771930880444
              ],
              [
                22.26628303527833,
                39.714515732504324
              ],
              [
                22.268342971801772,
                39.70870535808302
              ],
              [
                22.264223098754897,
                39.69761146616883
              ],
              [
                22.268342971801772,
                39.682816835996704
              ],
              [
                22.26353645324708,
                39.670133201083566
              ],
              [
                22.26078987121583,
                39.64475894436323
              ],
              [
                22.25461006164552,
                39.62360661507392
              ],
              [
                22.220964431762702,
                39.61091211302302
              ],
              [
                22.203798294067397,
                39.60350591167612
              ],
              [
                22.16706275939943,
                39.59054315318843
              ],
              [
                22.136850357055675,
                39.59186599478634
              ],
              [
                22.125520706176765,
                39.60668009497007
              ],
              [
                22.099084854125987,
                39.606151074525386
              ],
              [
                22.08947181701661,
                39.596098918161275
              ],
              [
                22.07024574279786,
                39.60006704891481
              ],
              [
                22.04174995422365,
                39.604563988940946
              ],
              [
                22.011880874633796,
                39.59424704601088
              ],
              [
                22.001237869262706,
                39.60165423756164
              ],
              [
                22.00501441955568,
                39.60985413276074
              ],
              [
                21.990938186645515,
                39.61117660556242
              ],
              [
                21.974458694458015,
                39.620168750661115
              ],
              [
                21.956605911254893,
                39.61884644964361
              ],
              [
                21.955575942993175,
                39.613821475380384
              ],
              [
                21.957635879516612,
                39.6024478182446
              ],
              [
                21.96484565734864,
                39.592659687620944
              ],
              [
                21.972055435180675,
                39.58578071429923
              ],
              [
                21.974458694458015,
                39.5762548545207
              ],
              [
                21.96347236633302,
                39.56937425264899
              ],
              [
                21.935319900512706,
                39.57043285123216
              ],
              [
                21.909914016723643,
                39.572020718800964
              ],
              [
                21.882791519165046,
                39.58419316192748
              ],
              [
                21.863222122192393,
                39.59451160220635
              ],
              [
                21.862878799438487,
                39.614614916621335
              ],
              [
                21.84433937072755,
                39.62307772397254
              ],
              [
                21.827859878540053,
                39.63153949652095
              ],
              [
                21.80108070373536,
                39.665904805207504
              ],
              [
                21.775674819946296,
                39.66986893392272
              ],
              [
                21.762628555297862,
                39.67673955156969
              ],
              [
                21.746492385864265,
                39.6756825779493
              ],
              [
                21.72657966613771,
                39.672511560042174
              ],
              [
                21.71696662902833,
                39.6944414551804
              ],
              [
                21.696023941040046,
                39.70527172498515
              ],
              [
                21.661691665649432,
                39.702102065845715
              ],
              [
                21.64727210998536,
                39.69470562832339
              ],
              [
                21.63422584533692,
                39.689421973369726
              ],
              [
                21.621522903442393,
                39.684930548701864
              ],
              [
                21.61980628967286,
                39.67673955156969
              ],
              [
                21.61980628967286,
                39.669340396568465
              ]
            ]
          ]
        }
      }
  
    ]
  }
//End of geojson data//

//Declaration of BaseLayers and the Map//
var mymap = L.map('map', {minZoom: 9}).setView([39.37, 22.271], 9);

var normalia=L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibGFrc2VyayIsImEiOiJjazlpaWpldzIwMjFsM2ZuMnQ0bnk3NTl6In0.6hYqQijbENyIxmJnKHQC_A', {
  maxZoom: 18,
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
      '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
      'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  id: 'mapbox/outdoors-v11',
  tileSize: 512,
  zoomOffset: -1
}).addTo(mymap);

var gl = L.mapboxGL({
  accessToken: "pk.eyJ1IjoibGFrc2VyayIsImEiOiJjazlpaWpldzIwMjFsM2ZuMnQ0bnk3NTl6In0.6hYqQijbENyIxmJnKHQC_A",
  style: 'mapbox://styles/lakserk/ck9qpcbaz168f1ip8c1hdt9pj'
});

//End of Declaration of BaseLayers and the Map//

//Map boundaries
var southWest = L.latLng(38.941793, 20.885705),
northEast = L.latLng(40.214252, 24.189396);
var bounds = L.latLngBounds(southWest, northEast);

mymap.setMaxBounds(bounds);
mymap.on('drag', function() {
mymap.panInsideBounds(bounds, { animate: false });
});
//End of Map boundaries


var markersLayer = new L.LayerGroup();	//layer contain searched elements
mymap.addLayer(markersLayer);



//Sidebar
var sidebar = L.control.sidebar({
  autopan: false,       // whether to maintain the centered map point when opening the sidebar
  closeButton: true,    // whether t add a close button to the panes
  container: 'sidebar', // the DOM container or #ID of a predefined sidebar container that should be used
  position: 'left',     // left or right
}).addTo(mymap);
//End of Sidebar


//GeoJson collection//
var categories = {},
    category;

function onEachFeature(feature, layer) {
  // Initialize the category array if not already set.
  if (typeof categories[feature.properties.category] === "undefined") {
    categories[feature.properties.category] = [];
  }
  categories[feature.properties.category].push(layer);
  layer.on('click', function(e) {
      rotas.resetStyle();
      layer.setStyle({fillColor: '#3f0', color: '#0f0'});
      $(".settlementname").html(feature.properties.name);
      $(".settlementdescription").html(feature.properties.description);
      if($("#sidebar").hasClass("collapsed")){sidebar.open('home');}
  });
}



var rotas = L.geoJSON(settlements, {
  pointToLayer: function(feature, latlng) {
      return new L.CircleMarker(latlng, {radius: 10, fillOpacity: .6, weight: 2});
     },
     style: function(feature) {
      var cat = feature.properties.category;
      if (cat == "forest") {
        return {
          color: "green"
        }; 
      }
      else if (cat == "park") {
        return {
          color: "orange"
        };
      } else if (cat == "village") {
        return {
          color: "brown"
        };
      }  else if (cat == "castle") {
        return {
          color: "black"
        };
      }
      else {
        return {
          color: "white"
        }
      }
    },
    onEachFeature: onEachFeature
});

var theregions=L.geoJSON(regions,{
  pointToLayer: function(feature, latlng) {
    return new L.CircleMarker(latlng, {radius: 10, fillOpacity: .6, weight: 2});
   },
   style: function(feature) {
    var cat = feature.properties.catigoria;
    if (cat == "drakov") {
      return {
        color: "red"
      }; 
    }
    else if (cat == "vlachov") {
      return {
        color: "orange"
      };
    } else if (cat == "karagunov") {
      return {
        color: "brown"
      };
    }
    else {
      return {
        color: "white"
      }
    }
  }
});

//End of GeoJson collection//

//Layer Control Section//
var baseMaps={
  "Normal": normalia,
  "Otherine":gl
};

var overlaysObj = {},
    categoryName,
    categoryArray,
    categoryLG;

var baseMaps1={
  "Normal": normalia
};

var regiogroup={
  "Ζώνες":theregions
};

for (categoryName in categories) {
    categoryArray = categories[categoryName];
    categoryLG = L.layerGroup(categoryArray).addTo(mymap);
    categoryLG.categoryName = categoryName;
    overlaysObj[categoryName] = categoryLG;
}

// Create an empty LayerGroup that will be used to emulate adding / removing all categories.
var allPointsLG = L.layerGroup();
overlaysObj["All Points"] = allPointsLG;


var control = L.control.layers(baseMaps, overlaysObj, { collapsed: false, position:'bottomright' }).addTo(mymap);
var controlregions = L.control.layers(baseMaps1, regiogroup, { collapsed: false, position:'bottomright', hideSingleBase:true }).addTo(mymap);
//End of Layer Control Section//


var searchControl = new L.Control.Search({
  container:"searchholder",
  propertyName: 'name',		
  layer: rotas,
  zoom: 13,
  minLength:2,
  collapsed:false,
  marker: false
});

searchControl.on('search:locationfound', function(e) {
  
  rotas.resetStyle();
  e.layer.setStyle({fillColor: '#3f0', color: '#0f0'});
  if(e.layer._popup)
      e.layer.openPopup();
  
  });

mymap.addControl( searchControl );


//Measure Distance Section//
L.control.polylineMeasure({
  position:'bottomright', 
  unit:'metres', 
  showBearings:false, 
  clearMeasurementsOnStop: false, 
  showClearControl: true, 
  showUnitControl: true
}).addTo(mymap);
